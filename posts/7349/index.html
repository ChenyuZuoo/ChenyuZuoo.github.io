<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Einstiegen bitte!"><meta name="google-site-verification" content="L7-zLUxhF4WYJprTtGO0jUL7BYmE9BrpzuwU7s_XEJI"><title>How to Draw a Horizon Chart with R | Chenyu's Script</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-91094510-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">How to Draw a Horizon Chart with R</h1><a id="logo" href="/.">Chenyu's Script</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about.html"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">How to Draw a Horizon Chart with R</h1><div class="post-meta">Dec 2, 2020<span> | </span><span class="category"><a href="/categories/R/">R</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" data-disqus-identifier="posts/7349/" href="/posts/7349/#disqus_thread"></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-Horizon-Chart"><span class="toc-number">1.</span> <span class="toc-text">Why Horizon Chart?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-data"><span class="toc-number">2.</span> <span class="toc-text">The data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Horizon-chart"><span class="toc-number">3.</span> <span class="toc-text">Horizon chart</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol></div></div><div class="post-content"><h3 id="Why-Horizon-Chart"><a href="#Why-Horizon-Chart" class="headerlink" title="Why Horizon Chart?"></a>Why Horizon Chart?</h3><p>Commonly, line chart is used to show the temporal change of a variable. But, if the value has a large range, it could take a large space for the chart to show the whole change. Horizon chart dissolved the fluctuations in the line charts in several bands and overlap the bands to show the large range of the values in a relative narrow space. It benefit us to compare various variable in a short time.</p>
<h3 id="The-data"><a href="#The-data" class="headerlink" title="The data"></a>The data</h3><p>Either vector data or matrix can be the input of the chart. My original dataset is composed of three columns: mon, frequency, and keyword. </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(lattice)</span><br><span class="line"><span class="keyword">library</span>(latticeExtra)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line">paper_all_frequency &lt;- read_csv(<span class="string">"C:your_address_of_the_data.csv"</span>)</span><br><span class="line">paper_all_frequency$mon = as.Date(paste(paper_all_frequency$mon,<span class="string">"-01"</span>,sep=<span class="string">""</span>))</span><br><span class="line"><span class="comment"># ranking the origin dataset by time</span></span><br><span class="line">frequency_ordered = paper_keyword_frequency[order( paper_keyword_frequency$keyword,paper_keyword_frequency$mon),]</span><br><span class="line"><span class="comment"># convert the frequency into matrix</span></span><br><span class="line">paper_frequency = matrix(frequency_ordered$frequency, ncol = <span class="number">5</span>)</span><br><span class="line"><span class="comment"># convert the matrix into the time-series data</span></span><br><span class="line"><span class="comment"># frequency = 12 means the temporal gap is one month</span></span><br><span class="line">paper_frequency = ts(paper_frequency, start = c(<span class="number">2017</span>, <span class="number">1</span>), frequency = <span class="number">12</span>, names = c( <span class="string">"all"</span> , <span class="string">"Artificial intelligence"</span>,<span class="string">"Human computer interaction"</span>,<span class="string">"Life and medical sciences"</span>,<span class="string">"Machine learning"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="Horizon-chart"><a href="#Horizon-chart" class="headerlink" title="Horizon chart"></a>Horizon chart</h3><p>Draw the horizon chart:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># draw horizon plot</span></span><br><span class="line"><span class="comment"># nbands indicates the layers of each chart</span></span><br><span class="line"><span class="comment"># horizonscale is the width of each band</span></span><br><span class="line">horizonplot(paper_frequency, nbands = <span class="number">8</span>, horizonscale = <span class="number">150</span>, origin = <span class="number">0</span>, colorkey = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/images/horizon_chart.jpg" alt="A Horizon Chart"></p>
<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="https://rpubs.com/ramanraja/horizon" target="_blank" rel="noopener">Horizon Plots</a><br>[2] <a href="https://bernatgel.github.io/karyoploter_tutorial/Tutorial/PlotHorizon/PlotHorizon.html" target="_blank" rel="noopener">Plotting Horizon Plots</a><br>[3] <a href="https://yonicd.github.io/ggalt/articles/horizon.html" target="_blank" rel="noopener">Horizon Plots</a></p>
</div><div class="tags"><a href="/tags/visualization/">visualization</a></div><div class="post-nav"><a class="next" href="/posts/4537/">CORS Error</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'chenyuzuoo';
var disqus_identifier = 'posts/7349/';
var disqus_title = 'How to Draw a Horizon Chart with R';
var disqus_url = 'https://chenyuzuoo.github.io/posts/7349/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//chenyuzuoo.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://chenyuzuoo.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ArcGIS/">ArcGIS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Latex/">Latex</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/R/">R</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/">Sublime</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Theory/">Theory</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/model/" style="font-size: 15px;">model</a> <a href="/tags/front-end/" style="font-size: 15px;">front end</a> <a href="/tags/user-management/" style="font-size: 15px;">user management</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/web-mapping/" style="font-size: 21.5px;">web mapping</a> <a href="/tags/text-processing/" style="font-size: 21.5px;">text processing</a> <a href="/tags/error-shooting/" style="font-size: 28px;">error shooting</a> <a href="/tags/pandas/" style="font-size: 15px;">pandas</a> <a href="/tags/visualization/" style="font-size: 15px;">visualization</a> <a href="/tags/installation/" style="font-size: 21.5px;">installation</a> <a href="/tags/listener/" style="font-size: 15px;">listener</a> <a href="/tags/ArcGIS-Pro/" style="font-size: 15px;">ArcGIS Pro</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/writing/" style="font-size: 15px;">writing</a> <a href="/tags/snippet/" style="font-size: 15px;">snippet</a> <a href="/tags/writing-tool/" style="font-size: 15px;">writing, tool</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/spatial-query/" style="font-size: 15px;">spatial query</a> <a href="/tags/ArcGIS/" style="font-size: 15px;">ArcGIS</a> <a href="/tags/Tomcat/" style="font-size: 15px;">Tomcat</a> <a href="/tags/PostgreSQL/" style="font-size: 15px;">PostgreSQL</a> <a href="/tags/GeoServer/" style="font-size: 15px;">GeoServer</a> <a href="/tags/Leaflet/" style="font-size: 15px;">Leaflet</a> <a href="/tags/data-visualization/" style="font-size: 15px;">data visualization</a> <a href="/tags/Network/" style="font-size: 15px;">Network</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/7349/">How to Draw a Horizon Chart with R</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/4537/">CORS Error</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/37160/">Postgis Error on st_within</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/33608/">Show Changes in Latex</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/25922/">Latex Footnote in Figure Caption</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/23844/">Convert Two-dimensional Table to One-dimensional Table</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/35618/">Load External Geojson to Leaflet</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/18707/">Install Geopandas</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/31988/">Multiple Linear Regression in R</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/30557/">Spatial polygon area calculation by another polygon layer</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//chenyuzuoo.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://qsli.github.io/" title="KL's Blog" target="_blank">KL's Blog</a><ul></ul><a href="https://shuoyanhuang.github.io/" title="S.Huang's Personal Page" target="_blank">S.Huang's Personal Page</a></div><div class="widget"><div class="widget-title"><i class="fa fa-view-o"> View Record</i></div></div>Total<span id="busuanzi_container_site_pv"><span> </span><span rel="nofollow" id="busuanzi_value_site_pv"></span><span rel="nofollow">  hits, </span></span><span id="busuanzi_container_site_uv"><span rel="nofollow" id="busuanzi_value_site_uv"></span><span rel="nofollow">  vistors.</span></span></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Chenyu's Script.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>