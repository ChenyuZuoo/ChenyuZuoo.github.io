<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Einstiegen bitte!"><meta name="google-site-verification" content="L7-zLUxhF4WYJprTtGO0jUL7BYmE9BrpzuwU7s_XEJI"><title>深入理解Android Activity生命周期 | Chenyu's Script</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-91094510-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">深入理解Android Activity生命周期</h1><a id="logo" href="/.">Chenyu's Script</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about.html"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">深入理解Android Activity生命周期</h1><div class="post-meta">Jan 6, 2017<span> | </span><span class="category"><a href="/categories/Android/">Android</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" data-disqus-identifier="posts/858/" href="/posts/858/#disqus_thread"></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#生命周期函数"><span class="toc-number">1.</span> <span class="toc-text">生命周期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多个activity的实现方法"><span class="toc-number">2.</span> <span class="toc-text">多个activity的实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#定义多个activity"><span class="toc-number">2.1.</span> <span class="toc-text">定义多个activity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动一个activity的方法"><span class="toc-number">2.2.</span> <span class="toc-text">启动一个activity的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Back-Stack"><span class="toc-number">3.</span> <span class="toc-text">Back Stack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实例说明"><span class="toc-number">4.</span> <span class="toc-text">实例说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Intent对象基础"><span class="toc-number">5.</span> <span class="toc-text">Intent对象基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference"><span class="toc-number">6.</span> <span class="toc-text">Reference</span></a></li></ol></div></div><div class="post-content"><p><code>activity</code>是一个提供用户交互的窗口，<code>activity</code>之内可以包含多个<code>view</code>去实现具体的显示和交互。<code>activity</code>一般是以全屏的形式出现，也有特殊情况比如内嵌在另一个<code>activity</code>中。<br>Google给出了<code>activity</code>的生命周期流程图如下<br><img src="/images/activity_lifecycle.png" alt="Activity生命周期"></p>
<hr>
<h3 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h3><p><code>activity</code>生命周期函数是由<code>android</code>操作系统调用，我们如上可以复写某个（或多个）函数，实现更多的功能。比如管理音乐软件的后台播放功能。</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>调用时机</th>
</tr>
</thead>
<tbody>
<tr>
<td>OnCreate</td>
<td>在activity对象被第一次创建时候调用</td>
</tr>
<tr>
<td>OnStart</td>
<td>在activity变得可见时调用</td>
</tr>
<tr>
<td>OnResume</td>
<td>在activity开始准备与用户交互时调用(不释放内存)</td>
</tr>
<tr>
<td>OnPause</td>
<td>在系统即将启动另外一个activity之前调用(不释放内存)</td>
</tr>
<tr>
<td>OnStop</td>
<td>当前activity变得不可见时调用</td>
</tr>
<tr>
<td>OnRestart</td>
<td>当一个activity再次被启动之前调用</td>
</tr>
<tr>
<td>OnDestroy</td>
<td>当前activity被销毁之前调用</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="多个activity的实现方法"><a href="#多个activity的实现方法" class="headerlink" title="多个activity的实现方法"></a>多个<code>activity</code>的实现方法</h3><h4 id="定义多个activity"><a href="#定义多个activity" class="headerlink" title="定义多个activity"></a>定义多个<code>activity</code></h4><ul>
<li>首先定义一个类，继承<code>activity</code></li>
<li>在该类当中，复写<code>activity</code>当中的<code>OnCreate</code>方法</li>
<li>在<code>AndroidManifest.xml</code>文件中注册该<code>activity</code></li>
</ul>
<h4 id="启动一个activity的方法"><a href="#启动一个activity的方法" class="headerlink" title="启动一个activity的方法"></a>启动一个<code>activity</code>的方法</h4><ul>
<li>生成一个意图对象<code>Intent</code></li>
<li>调用<code>setClass</code>方法设置所要启动的<code>activity</code>，其中第一个参数是<code>packageContext</code>,就是当前类中应用的包名；第二个参数是意图要设置的类的名称。</li>
<li>调用<code>startActivity</code>方法启动<code>activity</code></li>
</ul>
<p>在这里复写了<code>MainActivity</code>中的七种方法，为了更清晰的了解<code>activity</code>的生命周期，这里还创建第二个<code>activity</code>，以便观察不同时期<code>activity</code>的状态。本例中调用<code>SystemOut</code>输出<code>activity</code>的状态。设置监听器<code>ButtonListener</code>，在点击按钮的时候启动第二个<code>activity</code>。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Button button;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        button = (Button) findViewById(R.id.button);</span><br><span class="line">        ButtonListener listener = <span class="keyword">new</span> ButtonListener();</span><br><span class="line">        button.setOnClickListener(listener);</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnCreate"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ButtonListener</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">            intent.setClass(MainActivity.<span class="keyword">this</span>, SecondActivity.class);</span><br><span class="line">            startActivity(intent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnStart"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnStop"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnDestroy"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnResume"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnPause"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"MainActivity OnRestart"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>第二个<code>activity</code>，命名为<code>SecondActivity</code>，同样复写其中的七个生命周期函数  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cheryl.multiactivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecondActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_second);</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnCreate"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnStart"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnStop"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnDestroy"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnResume"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnPause"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        System.out.println(<span class="string">"SecondActivity OnRestart"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>AndroidManifest.xml</code>文件中注册第二个<code>activity</code>，在<code>&lt;application&gt;</code>标签结束之前添加如下代码：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity android:name=<span class="string">".SecondActivity"</span> android:label=<span class="string">"SecondActivity"</span>&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Back-Stack"><a href="#Back-Stack" class="headerlink" title="Back Stack"></a>Back Stack</h3><p>安卓应用中通常包含多个<code>activity</code>，每个<code>activity</code>都是围绕不同的内容设计，而且可以打开别的<code>activity</code>，甚至是其他app中的<code>activity</code>，比如分享或者在浏览器中打开等等功能。在一个特定的功能当中，一个任务(task)就等于是多个<code>activity</code>的集合。</p>
<p>一般情况下，安卓系统中会同时运行多个apps，系统就需要同时管理多个apps，且每个任务中有很多任务。当用户启动一个应用程序的时候，当前app就会在前台显示。另一个app被开启的时候，新的app就会在旧app的顶端显示，同时获得焦点。旧的app被压入back stack栈中。当用户点击返回按钮，位于栈顶的<code>activity</code>被弹出，底部的<code>activity</code>会在前台显示并获得焦点。back stack栈中<code>activity</code>的顺序不能被改变，只能压入栈push，或者弹出栈pop。如果用户持续点击返回，栈内的<code>activity</code>会依次弹出，前台显示之前的<code>activity</code>，直到显示主页，back stack栈为空。</p>
<p>当用户开启新的任务，或者回到主页，一个任务在后台的状态下仍会保持以一个整体的形式存放。当任务被存放在后台，所有的<code>activity</code>都是stopped状态，但仍会保持完整性，只是暂时失去焦点，焦点被另一个<code>activity</code>所取代。举例用户在使用app A，且app A包括三个<code>activity</code>，在当前<code>activity</code>之下还有两个存放在栈中。然后用户点击home按钮返回主页，然后开启一个新的app B，这时app A进入后台。系统会给app B开启新的任务和back stack，用户在完成app B中的工作后，按home键返回主页，再次进入app A，这时app A中保存的所有<code>activity</code>会在暂停的位置获得焦点继续运行。如果用户返回app B，也会继续运行之前app B中的<code>activity</code>。<br><img src="/images/diagram_multitasking.png" alt="多任务状态"><br>因为<code>activity</code>在back stack栈中的位置不能被改变，可能会导致某个<code>activity</code>反复进出back stack栈(比如home <code>activity</code>)。如果要改变这种行为，需要深入了解<a href="https://developer.android.com/design/patterns/navigation.html" target="_blank" rel="noopener">Navigation Design</a>。</p>
<hr>
<h3 id="实例说明"><a href="#实例说明" class="headerlink" title="实例说明"></a>实例说明</h3><p>在第一个<code>activity</code>布局中设置一个按钮，让用户通过点击按钮进入第二个<code>activity</code>。<code>logcat</code>查看函数运行情况。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">	android:id=<span class="string">"@+id/button"</span></span><br><span class="line">	android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">	android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">	android:text=<span class="string">"Call SecondActivity"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>第二个<code>activity</code>只显示文字  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">	android:id=<span class="string">"@+id/secondTextView"</span></span><br><span class="line">	android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">	android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">	android:text=<span class="string">"SecondActivity"</span>/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行App<br><img src="/images/runapp.jpg" alt="运行界面"><br>输出如下，系统相继调用了<code>OnCreate</code>,<code>OnStart</code>和<code>OnResume</code>方法。</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:39:15.775  I/System.out: MainActivity OnCreate</span><br><span class="line">01-07 12:39:15.775  I/System.out: MainActivity OnStart</span><br><span class="line">01-07 12:39:15.775  I/System.out: MainActivity OnResume</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>屏幕变暗休眠<br>系统调用<code>OnPause</code>和<code>OnStop</code>方法</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:39:45.840  I/System.out: MainActivity OnPause</span><br><span class="line">01-07 12:39:45.860  I/System.out: MainActivity OnStop</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>再次点亮屏幕</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:44:55.085  I/System.out: MainActivity OnRestart</span><br><span class="line">01-07 12:44:55.085  I/System.out: MainActivity OnStart</span><br><span class="line">01-07 12:44:55.095  I/System.out: MainActivity OnResume</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>点击按钮进入第二个<code>activity</code>，可以看到系统是先暂停第一个<code>activity</code>，创建和开始第二个<code>activity</code>，第二个<code>activity</code>准备与用户交互，最后再停掉第一个<code>activity</code>。</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:47:10.355  I/System.out: MainActivity OnPause</span><br><span class="line">01-07 12:47:10.410  I/System.out: SecondActivity OnCreate</span><br><span class="line">01-07 12:47:10.410  I/System.out: SecondActivity OnStart</span><br><span class="line">01-07 12:47:10.410  I/System.out: SecondActivity OnResume</span><br><span class="line">01-07 12:47:10.575  I/System.out: MainActivity OnStop</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>Home键</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:49:08.245  I/System.out: SecondActivity OnPause</span><br><span class="line">01-07 12:49:08.560  I/System.out: SecondActivity OnStop</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>再次进入app</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:49:35.690  I/System.out: SecondActivity OnRestart</span><br><span class="line">01-07 12:49:35.690  I/System.out: SecondActivity OnStart</span><br><span class="line">01-07 12:49:35.690  I/System.out: SecondActivity OnResume</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>Back键，app返回到第一个<code>activity</code>的页面。系统是先暂停第二个<code>activity</code>，重新返回第一个<code>activity</code>，然后销毁第二个<code>activity</code></li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:50:36.185  I/System.out: SecondActivity OnPause</span><br><span class="line">01-07 12:50:36.200  I/System.out: MainActivity OnRestart</span><br><span class="line">01-07 12:50:36.200  I/System.out: MainActivity OnStart</span><br><span class="line">01-07 12:50:36.200  I/System.out: MainActivity OnResume</span><br><span class="line">01-07 12:50:36.370  I/System.out: SecondActivity OnStop</span><br><span class="line">01-07 12:50:36.370  I/System.out: SecondActivity OnDestroy</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>再次Back，回到系统主页，销毁第一个<code>activity</code></li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01-07 12:53:19.980  I/System.out: MainActivity OnPause</span><br><span class="line">01-07 12:53:20.180  I/System.out: MainActivity OnStop</span><br><span class="line">01-07 12:53:20.180  I/System.out: MainActivity OnDestroy</span><br></pre></td></tr></table></figure>
</code></pre><hr>
<h3 id="Intent对象基础"><a href="#Intent对象基础" class="headerlink" title="Intent对象基础"></a>Intent对象基础</h3><p>在第一段代码的Lisener函数里我们看到了<code>intent</code>的使用，intent是即将要进行操作的一个抽象描述，可以用于启动另一个<code>activity</code>，广播一个特定的组件信息，或者和后台服务通信。可以通俗的理解<code>intent</code>，就是<code>action</code>和<code>data</code>的集合体。</p>
<blockquote>
<p>An Intent is an object that provides runtime binding between separate components (such as two activities). The Intent represents an app’s “intent to do something.” You can use intents for a wide variety of tasks, but most often they’re used to start another activity.</p>
</blockquote>
<p>简单理解就是，想要应用中做事件X，就把这个<code>动作</code>和<code>数据</code>写进<code>intent</code>，在合适的时机使用或接收。主要有三个场景下比较常用：</p>
<ul>
<li>在<code>activity</code>之间通过<code>intent</code>对象传递数据</li>
<li>使用<code>putExtra()</code>系列方法向<code>intent</code>对象中存储数据</li>
<li>使用<code>getXXXExtra()</code>系列方法从<code>intent</code>对象中取出数据<br>通过以上方法，就可以实现不同<code>activity</code>之间的通信</li>
</ul>
<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="https://developer.android.com/guide/components/activities/tasks-and-back-stack.html" target="_blank" rel="noopener">https://developer.android.com/guide/components/activities/tasks-and-back-stack.html</a> Google guide: Tasks and Back Stack<br>[2] <a href="http://blog.csdn.net/android_tutor/article/details/5772285" target="_blank" rel="noopener">http://blog.csdn.net/android_tutor/article/details/5772285</a> 两分钟彻底让你明白Android Activity生命周期(图文)<br>[3] <a href="http://stackoverflow.com/questions/6578051/what-is-an-intent-in-android" target="_blank" rel="noopener">http://stackoverflow.com/questions/6578051/what-is-an-intent-in-android</a> What is an Intent in Android?<br>[4] <a href="https://developer.android.com/reference/android/content/Intent.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/content/Intent.html</a> Intent|Android Developers</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/posts/30333/">Google Play 服务已停止运行解决方案</a><a class="next" href="/posts/45498/">安卓线程初步(一)</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'chenyuzuoo';
var disqus_identifier = 'posts/858/';
var disqus_title = '深入理解Android Activity生命周期';
var disqus_url = 'https://chenyuzuoo.github.io/posts/858/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//chenyuzuoo.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://chenyuzuoo.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Latex/">Latex</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/R/">R</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/">Sublime</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Theory/">Theory</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/error-shooting/" style="font-size: 15px;">error shooting</a> <a href="/tags/text-processing/" style="font-size: 15px;">text processing</a> <a href="/tags/installation/" style="font-size: 15px;">installation</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/16107/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/4477/">Pandas DataFrame Row Slicing by Value from another Table</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/31044/">Python Nested Class</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/8573/">GIS Object Has No Attribute 'admin'</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/22406/">Python Logging to Console and External File</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/49491/">Some Useful Packages in Latex</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/9892/">Extract Hour Field from Text under Database(PostgreSQL)</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/57760/">Including Chinese Charaters in Latex</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/21415/">An Easy Way to Draw Study Area</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/1328/">Text Comparision with Sublime</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//chenyuzuoo.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://qsli.github.io/" title="KL's Blog" target="_blank">KL's Blog</a><ul></ul><a href="https://shuoyanhuang.github.io/" title="S.Huang's Personal Page" target="_blank">S.Huang's Personal Page</a></div><div class="widget"><div class="widget-title"><i class="fa fa-view-o"> View Record</i></div></div>Total<span id="busuanzi_container_site_pv"><span> </span><span rel="nofollow" id="busuanzi_value_site_pv"></span><span rel="nofollow">  hits, </span></span><span id="busuanzi_container_site_uv"><span rel="nofollow" id="busuanzi_value_site_uv"></span><span rel="nofollow">  vistors.</span></span></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Chenyu's Script.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>